{% extends "base.html" %}

{% block title %}Dashboard - Path Traversal Lab{% endblock %}

{% block content %}
<div class="header">
    <h1>ğŸ“‹ Dashboard</h1>
    <p>Xin chÃ o, <strong>{{ username }}</strong>!</p>
</div>

<div class="form-container">
    <h3>ğŸ“ Táº¡o Note má»›i</h3>
    <form method="POST" action="/save_note">
        <div class="form-group">
            <label for="note">Ná»™i dung note:</label>
            <textarea id="note" name="note" rows="5" placeholder="Nháº­p ná»™i dung note cá»§a báº¡n..." required></textarea>
        </div>
        <div class="nav-links">
            <button type="submit" class="btn">ğŸ’¾ LÆ°u Note</button>
            <a href="/view_note" class="btn btn-secondary">ğŸ‘€ Xem Note</a>
            <a href="/logout" class="btn btn-danger">ğŸšª ÄÄƒng xuáº¥t</a>
        </div>
    </form>
</div>

<div class="hint-container">
    <h3>ğŸ’¡ Gá»£i Ã½ khai thÃ¡c</h3>
    <p>Báº¡n cÃ³ muá»‘n xem gá»£i Ã½ Ä‘á»ƒ khai thÃ¡c lá»— há»•ng khÃ´ng?</p>
    <button id="showHint" class="btn btn-secondary" onclick="toggleHint()">ğŸ” Xem gá»£i Ã½</button>
    
    <div id="hintContent" class="security-hint" style="display: none;">
        <h4>ğŸ¯ CÃ¡ch khai thÃ¡c lá»— há»•ng:</h4>
        
        <div class="hint-step">
            <strong>BÆ°á»›c 1:</strong> ÄÄƒng xuáº¥t vÃ  Ä‘Äƒng kÃ½ láº¡i vá»›i username Ä‘áº·c biá»‡t
        </div>
        
        <div class="hint-step">
            <strong>BÆ°á»›c 2:</strong> Thá»­ username: <code>/flag.txt</code>
        </div>
        
        <div class="hint-step">
            <strong>BÆ°á»›c 3:</strong> ÄÄƒng nháº­p vÃ  táº¡o note
        </div>
        
        <div class="hint-step">
            <strong>BÆ°á»›c 4:</strong> Xem note Ä‘á»ƒ Ä‘á»c file flag!
        </div>
        
        <div class="alert alert-info">
            <strong>ğŸ” LÃ½ do:</strong> HÃ m <code>is_safe_username()</code> chá»‰ cháº·n <code>../</code> nhÆ°ng khÃ´ng biáº¿t vá» absolute path!
        </div>
        
        <div class="nav-links">
            <a href="/logout" class="btn btn-danger">ğŸšª ÄÄƒng xuáº¥t Ä‘á»ƒ thá»­</a>
        </div>
    </div>
</div>

<script>
function toggleHint() {
    const hintContent = document.getElementById('hintContent');
    const showHintBtn = document.getElementById('showHint');
    
    if (hintContent.style.display === 'none') {
        hintContent.style.display = 'block';
        showHintBtn.textContent = 'ğŸ™ˆ áº¨n gá»£i Ã½';
        showHintBtn.classList.remove('btn-secondary');
        showHintBtn.classList.add('btn-danger');
    } else {
        hintContent.style.display = 'none';
        showHintBtn.textContent = 'ğŸ” Xem gá»£i Ã½';
        showHintBtn.classList.remove('btn-danger');
        showHintBtn.classList.add('btn-secondary');
    }
}
</script>
{% endblock %} 